define(function(){var n=function(){function n(n,e,r,t,x,u,y,a,i,f,c,o,l){return n&&(r&&!i[x][y]&&(o[l++]={x:y,y:x}),t&&!i[x][a]&&(o[l++]={x:a,y:x})),e&&(r&&!i[u][y]&&(o[l++]={x:y,y:u}),t&&!i[u][a]&&(o[l++]={x:a,y:u})),o}function e(n,e,r,t,x,u,y,a,i,f,c,o,l){return n=x>-1,e=f>u,r=c>y,t=a>-1,r&&(n&&!i[x][y]&&(o[l++]={x:y,y:x}),e&&!i[u][y]&&(o[l++]={x:y,y:u})),t&&(n&&!i[x][a]&&(o[l++]={x:a,y:x}),e&&!i[u][a]&&(o[l++]={x:a,y:u})),o}function r(n,e,r,t,x,u,y,a,i,f,c,o,l){return o}function t(n,e,r,t,x,u){var y=r-1,a=r+1,i=e+1,f=e-1,c=y>-1&&!t[y][e],o=x>a&&!t[a][e],l=u>i&&!t[r][i],v=f>-1&&!t[r][f],s=[],g=0;return c&&(s[g++]={x:e,y:y}),l&&(s[g++]={x:i,y:r}),o&&(s[g++]={x:e,y:a}),v&&(s[g++]={x:f,y:r}),n(c,o,l,v,y,a,i,f,t,x,u,s,g)}function x(n,e,r,t){return t(r(n.x-e.x),r(n.y-e.y))}function u(n,e,r,t){var x=n.x-e.x,u=n.y-e.y;return t(x*x+u*u)}function y(n,e,r,t){return r(n.x-e.x)+r(n.y-e.y)}function a(a,i,f,c){var o,l,v,s,g,h,d,b,p,w=a[0].length,M=a.length,k=w*M,D=Math.abs,E=Math.max,F={},m=[],q=[{x:i[0],y:i[1],f:0,g:0,v:i[0]+i[1]*w}],j=1;switch(f={x:f[0],y:f[1],v:f[0]+f[1]*w},c){case"Diagonal":v=n;case"DiagonalFree":l=x;break;case"Euclidean":v=n;case"EuclideanFree":E=Math.sqrt,l=u;break;default:l=y,v=r}v||(v=e);do{for(h=k,d=0,s=0;j>s;++s)(c=q[s].f)<h&&(h=c,d=s);if(b=q.splice(d,1)[0],b.v!=f.v)for(--j,p=t(v,b.x,b.y,a,M,w),s=0,g=p.length;g>s;++s)(o=p[s]).p=b,o.f=o.g=0,o.v=o.x+o.y*w,o.v in F||(o.f=(o.g=b.g+l(o,b,D,E))+l(o,f,D,E),q[j++]=o,F[o.v]=1);else{s=j=0;do m[s++]=[b.x,b.y];while(b=b.p);m.reverse()}}while(j);return m}return a}();return n});